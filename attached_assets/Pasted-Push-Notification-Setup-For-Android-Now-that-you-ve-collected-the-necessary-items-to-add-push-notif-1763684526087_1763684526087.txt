Push Notification Setup For Android
Now that youâ€™ve collected the necessary items to add push notifications to your Android app, the next step is to make your Ionic app aware of OneSignal so that it can receive notifications.

Creating Your Ionic + Capacitor (React) App
Inside your terminal, run the following command to add the Ionic project globally in your machine to use Ionic in your command line.

npm install -g @ionic/cli
Next, run the following command to create a new Ionic + Capacitor (React) project using the Ionic CLI. You will be asked to select a framework, select React.

ionic start
When asked to enter a project name, you can enter whatever name you want. In my case, I named my project â€‹â€‹OneSignal-Ionic.

You will also be asked to select a template. Feel free to select whatever template youâ€™d like. In the example below, I have selected tabs as the template.

Adding OneSignal To Your Ionic Application
To guide you through this process, Iâ€™m using a simple Ionic React Android app that illustrates how to integrate the OneSignal SDK. It is running on the Cordova npm package onesignal-cordova-plugin release.

To begin, add your desired platform to the project. For my app, I chose Android as my desired platform by running: ionic capacitor add android. Then, install the OneSignal Cordova plugin inside the project by running npm install onesignal-cordova-plugin. The ionic capacitor build android command will open the Android build in Android Studio.

After building your Ionic application into a new Android app, run the cap sync command (one time only) by entering npx cap sync.

At the top of you App.tsx file, import the OneSignal npm package to your component.

import OneSignal from 'onesignal-cordova-plugin';
Add the following initialization code to the App.tsx file. Make sure to add your app ID, which you previously copied during Google Android FCM Configuration.

// Call this function when your app starts
function OneSignalInit(): void {
  // NOTE: Update the setAppId value below with your OneSignal AppId.
  OneSignal.setAppId("YOUR_ONESIGNAL_APP_ID");
  OneSignal.setNotificationOpenedHandler(function(jsonData) {
      console.log('notificationOpenedCallback: ' + JSON.stringify(jsonData));
  });
}
After creating the OneSignalInit() function, you are going to call it when your app starts. In the App.tsx file, add the following line of code:

OneSignalInit();

Finally, build your app again by running ionic capacitor build android and opening the Android Studio project.

I recommend you run the application on an actual Android device to test the notifications. To do so, you will need to connect your Android device and enable developer mode.

Once you have connected to the device and enabled developer mode, run the application on your device by selecting your device as the target device. In my example, Iâ€™m running the app on a Google Pixel 5.

Once you have opened the application on your device, the device will be automatically subscribed to the notification. Now, your device will be able to receive notifications sent by OneSignal.

To complete the setup process, return to your OneSignal dashboard to the point at which you previously left off. Click on the Check Subscribed Users and a green message will appear.

Click on the Done button.

Send A Push Notification
Itâ€™s time to send your first web push notification! To do so, log in to your OneSignal account and navigate to the Dashboard tab. On the dashboard page, click on the blue button that says New Push.

Note: Notifications are enabled on Android devices by default, but can be disabled by users via their phone settings. If you have manually disabled your notifications, make sure you enable notifications again in order to test how they work.

You will be redirected to a new window that will allow you to customize your push notification. Under Audience, make sure that Send to Subscribed Users is selected. Then, create your message by adding your message title, content, and image. Because this is the first notification your subscribers will receive, you may choose to craft a simple welcome message to confirm that they've been subscribed and reinforce the value that notifications will provide.

Under the Delivery Schedule section, select Immediately and Send to everyone at the same time to send to all your current push subscribers. If you have just finished setting up your OneSignal account, chances are you're the first and only subscriber. If your app or website is heavily trafficked and other users have already opted in to receive push notifications, you may want to select Send to a particular segment(s) to test your message out on a specific audience. When you're ready to send your message, click on the blue Review and Send button at the bottom of the screen.

A small popup will appear for you to review your message. Once you are satisfied, click on the blue Send Message button. You should receive a web push notification on your device! ðŸš€

Now, you can keep expanding your code to make use of different features of the OneSignal SDK across your Ionic app by passing the OneSignal variable to different components. To learn more about the Ionic SDK visit our Ionic push SDK documentation.

Stay Connected